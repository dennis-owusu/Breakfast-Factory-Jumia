import{i as k,a as H,r as u,j as e,k as V,l as z,I as i,M as J,m as K,p as E,q as R,s as _,t as q,v as h,o as Y,b as Z,U as Q,B as X,c as ee,a3 as w,e as U}from"./index-CW7sJ-MG.js";import{u as se,F as re,a as l,b as n,c as o,d as c,S as te}from"./form-DgzDGx5y.js";import{T as ae}from"./textarea-B1GM8hMp.js";/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ne=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]],oe=k("building",ne);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const le=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],ce=k("image",le);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ie=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],de=k("upload",ie),ue=()=>{const{user:j}=H(s=>s.user),[p,b]=u.useState("basic"),[I,g]=u.useState(!1),[W,f]=u.useState(!1),[C,N]=u.useState(null),[S,y]=u.useState(""),[P,v]=u.useState(""),t=se({defaultValues:{outletName:"",email:"",phone:"",logo:null,coverImage:null,description:"",businessType:"retail",registrationNumber:"",taxId:"",street:"",city:"",state:"",postalCode:"",country:"Ghana",bankName:"",accountName:"",accountNumber:"",swiftCode:""}});u.useEffect(()=>{(async()=>{var m,x,d,r,F,T,B,L,A,D,G;if(j)try{g(!0);const a=(await w.getMyOutlet()).data.data;t.reset({outletName:a.name,email:((m=a.contact)==null?void 0:m.email)||"",phone:((x=a.contact)==null?void 0:x.phone)||"",logo:null,coverImage:null,description:a.description||"",businessType:a.businessType||"retail",registrationNumber:a.registrationNumber||"",taxId:a.taxId||"",street:((d=a.location)==null?void 0:d.street)||"",city:((r=a.location)==null?void 0:r.city)||"",state:((F=a.location)==null?void 0:F.state)||"",postalCode:((T=a.location)==null?void 0:T.postalCode)||"",country:((B=a.location)==null?void 0:B.country)||"Ghana",bankName:((L=a.bankInfo)==null?void 0:L.bankName)||"",accountName:((A=a.bankInfo)==null?void 0:A.accountName)||"",accountNumber:((D=a.bankInfo)==null?void 0:D.accountNumber)||"",swiftCode:((G=a.bankInfo)==null?void 0:G.swiftCode)||""}),a.logo&&a.logo!=="default-outlet-logo.jpg"&&y(a.logo),a.coverImage&&v(a.coverImage)}catch(O){console.error("Error fetching outlet data:",O),N("Failed to load outlet profile data. Please try again.")}finally{g(!1)}})()},[j,t]);const M=(s,m)=>{const x=s.target.files;if(x&&x[0]){const d=x[0],r=new FileReader;r.onloadend=()=>{t.setValue(m,d),m==="logo"?y(r.result):m==="coverImage"&&v(r.result)},r.readAsDataURL(d)}},$=async s=>{var m,x;g(!0),N(null),f(!1);try{const d={_id:j.outletId,name:s.outletName,contact:{email:s.email,phone:s.phone},description:s.description,businessType:s.businessType,registrationNumber:s.registrationNumber,taxId:s.taxId,location:{street:s.street,city:s.city,state:s.state,postalCode:s.postalCode,country:s.country},bankInfo:{bankName:s.bankName,accountName:s.accountName,accountNumber:s.accountNumber,swiftCode:s.swiftCode}};if(s.logo||s.coverImage){const r=new FormData;r.append("name",s.outletName),r.append("description",s.description),r.append("businessType",s.businessType),r.append("registrationNumber",s.registrationNumber),r.append("taxId",s.taxId),r.append("contact[email]",s.email),r.append("contact[phone]",s.phone),r.append("location[street]",s.street),r.append("location[city]",s.city),r.append("location[state]",s.state),r.append("location[postalCode]",s.postalCode),r.append("location[country]",s.country),r.append("bankInfo[bankName]",s.bankName),r.append("bankInfo[accountName]",s.accountName),r.append("bankInfo[accountNumber]",s.accountNumber),r.append("bankInfo[swiftCode]",s.swiftCode),s.logo&&r.append("logo",s.logo),s.coverImage&&r.append("coverImage",s.coverImage),await w.updateOutletProfileWithFiles(r,j.outletId)}else await w.updateOutletProfile(d);f(!0),U.success("Profile updated successfully!"),setTimeout(()=>{f(!1)},3e3)}catch(d){console.error("Error updating profile:",d),N(((x=(m=d.response)==null?void 0:m.data)==null?void 0:x.message)||d.message||"Failed to update profile"),U.error("Failed to update profile")}finally{g(!1)}};return e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Outlet Profile"}),e.jsx("p",{className:"text-gray-600",children:"Manage your outlet information and settings"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[e.jsx("div",{className:"border-b border-gray-200",children:e.jsxs("nav",{className:"-mb-px flex space-x-8",children:[e.jsx("button",{onClick:()=>b("basic"),className:`py-4 px-1 border-b-2 font-medium text-sm ${p==="basic"?"border-orange-500 text-orange-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Basic Information"}),e.jsx("button",{onClick:()=>b("business"),className:`py-4 px-1 border-b-2 font-medium text-sm ${p==="business"?"border-orange-500 text-orange-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Business Details"}),e.jsx("button",{onClick:()=>b("banking"),className:`py-4 px-1 border-b-2 font-medium text-sm ${p==="banking"?"border-orange-500 text-orange-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Payment Information"})]})}),e.jsx(re,{...t,children:e.jsxs("form",{onSubmit:t.handleSubmit($),className:"p-6",children:[C&&e.jsxs("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-md flex items-start",children:[e.jsx(V,{className:"h-5 w-5 text-red-500 mr-2 mt-0.5"}),e.jsx("span",{className:"text-red-700",children:C})]}),W&&e.jsxs("div",{className:"mb-6 p-4 bg-green-50 border border-green-200 rounded-md flex items-start",children:[e.jsx(z,{className:"h-5 w-5 text-green-500 mr-2 mt-0.5"}),e.jsx("span",{className:"text-green-700",children:"Profile updated successfully!"})]}),p==="basic"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(l,{control:t.control,name:"outletName",render:({field:s})=>e.jsxs(n,{children:[e.jsx(o,{children:"Outlet Name *"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(oe,{className:"h-5 w-5 text-gray-400"})}),e.jsx(c,{children:e.jsx(i,{...s,className:"pl-10",placeholder:"Your outlet name",required:!0})})]})]})}),e.jsx(l,{control:t.control,name:"email",render:({field:s})=>e.jsxs(n,{children:[e.jsx(o,{children:"Email Address *"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(J,{className:"h-5 w-5 text-gray-400"})}),e.jsx(c,{children:e.jsx(i,{...s,type:"email",className:"pl-10",placeholder:"contact@youroutlet.com",required:!0})})]})]})}),e.jsx(l,{control:t.control,name:"phone",render:({field:s})=>e.jsxs(n,{children:[e.jsx(o,{children:"Phone Number *"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(K,{className:"h-5 w-5 text-gray-400"})}),e.jsx(c,{children:e.jsx(i,{...s,type:"tel",className:"pl-10",placeholder:"+234 123 456 7890",required:!0})})]})]})}),e.jsx(l,{control:t.control,name:"description",render:({field:s})=>e.jsxs(n,{children:[e.jsx(o,{children:"Description"}),e.jsx(c,{children:e.jsx(ae,{...s,rows:3,placeholder:"Describe your outlet..."})})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx("div",{children:e.jsxs(n,{children:[e.jsx(o,{children:"Outlet Logo"}),e.jsxs("div",{className:"mt-1 flex items-center",children:[S?e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:S,alt:"Outlet Logo",className:"h-32 w-32 object-cover rounded-md"}),e.jsxs("button",{type:"button",onClick:()=>{t.setValue("logo",null),y("")},className:"absolute top-0 right-0 -mt-2 -mr-2 bg-red-100 rounded-full p-1 text-red-600 hover:bg-red-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",children:[e.jsx("span",{className:"sr-only",children:"Remove"}),e.jsx("svg",{className:"h-3 w-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})]})]}):e.jsx("div",{className:"h-32 w-32 border-2 border-gray-300 border-dashed rounded-md flex items-center justify-center",children:e.jsx(ce,{className:"h-8 w-8 text-gray-400"})}),e.jsxs("div",{className:"ml-5",children:[e.jsxs("label",{htmlFor:"logo",className:"cursor-pointer bg-white py-2 px-3 border border-gray-300 rounded-md shadow-sm text-sm leading-4 font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-orange-500",children:[e.jsx("span",{children:"Change"}),e.jsx("input",{id:"logo",name:"logo",type:"file",accept:"image/*",onChange:s=>M(s,"logo"),className:"sr-only"})]}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"PNG, JPG, GIF up to 2MB"})]})]})]})}),e.jsx("div",{children:e.jsxs(n,{children:[e.jsx(o,{children:"Cover Image"}),e.jsx("div",{className:"mt-1",children:P?e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:P,alt:"Cover",className:"h-32 w-full object-cover rounded-md"}),e.jsxs("button",{type:"button",onClick:()=>{t.setValue("coverImage",null),v("")},className:"absolute top-0 right-0 mt-2 mr-2 bg-red-100 rounded-full p-1 text-red-600 hover:bg-red-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",children:[e.jsx("span",{className:"sr-only",children:"Remove"}),e.jsx("svg",{className:"h-3 w-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})]})]}):e.jsx("label",{htmlFor:"coverImage",className:"cursor-pointer flex justify-center px-6 pt-5 pb-6 border-2 border-gray-300 border-dashed rounded-md",children:e.jsxs("div",{className:"space-y-1 text-center",children:[e.jsx(de,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsxs("div",{className:"flex text-sm text-gray-600",children:[e.jsxs("span",{className:"relative rounded-md font-medium text-orange-600 hover:text-orange-500 focus-within:outline-none focus-within:ring-2 focus-within:ring-offset-2 focus-within:ring-orange-500",children:["Upload a file",e.jsx("input",{id:"coverImage",name:"coverImage",type:"file",accept:"image/*",onChange:s=>M(s,"coverImage"),className:"sr-only"})]}),e.jsx("p",{className:"pl-1",children:"or drag and drop"})]}),e.jsx("p",{className:"text-xs text-gray-500",children:"PNG, JPG, GIF up to 5MB"})]})})})]})})]})]}),p==="business"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(l,{control:t.control,name:"businessType",render:({field:s})=>e.jsxs(n,{children:[e.jsx(o,{children:"Business Type"}),e.jsxs(E,{onValueChange:s.onChange,defaultValue:s.value,children:[e.jsx(c,{children:e.jsx(R,{children:e.jsx(_,{placeholder:"Select business type"})})}),e.jsxs(q,{children:[e.jsx(h,{value:"retail",children:"Retail"}),e.jsx(h,{value:"wholesale",children:"Wholesale"}),e.jsx(h,{value:"manufacturer",children:"Manufacturer"}),e.jsx(h,{value:"service",children:"Service Provider"})]})]})]})}),e.jsx(l,{control:t.control,name:"registrationNumber",render:({field:s})=>e.jsxs(n,{children:[e.jsx(o,{children:"Business Registration Number"}),e.jsx(c,{children:e.jsx(i,{...s,placeholder:"RC-123456"})})]})}),e.jsx(l,{control:t.control,name:"taxId",render:({field:s})=>e.jsxs(n,{children:[e.jsx(o,{children:"Tax ID / VAT Number"}),e.jsx(c,{children:e.jsx(i,{...s,placeholder:"TIN-7890123"})})]})})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-3",children:"Business Address"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(l,{control:t.control,name:"street",render:({field:s})=>e.jsxs(n,{children:[e.jsx(o,{children:"Street Address"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(Y,{className:"h-5 w-5 text-gray-400"})}),e.jsx(c,{children:e.jsx(i,{...s,className:"pl-10",placeholder:"123 Business Street"})})]})]})}),e.jsx(l,{control:t.control,name:"city",render:({field:s})=>e.jsxs(n,{children:[e.jsx(o,{children:"City"}),e.jsx(c,{children:e.jsx(i,{...s,placeholder:"Lagos"})})]})}),e.jsx(l,{control:t.control,name:"state",render:({field:s})=>e.jsxs(n,{children:[e.jsx(o,{children:"State/Province"}),e.jsx(c,{children:e.jsx(i,{...s,placeholder:"Lagos State"})})]})}),e.jsx(l,{control:t.control,name:"postalCode",render:({field:s})=>e.jsxs(n,{children:[e.jsx(o,{children:"Postal/ZIP Code"}),e.jsx(c,{children:e.jsx(i,{...s,placeholder:"100001"})})]})}),e.jsx(l,{control:t.control,name:"country",render:({field:s})=>e.jsxs(n,{children:[e.jsx(o,{children:"Country"}),e.jsxs(E,{onValueChange:s.onChange,defaultValue:s.value,children:[e.jsx(c,{children:e.jsx(R,{children:e.jsx(_,{placeholder:"Select country"})})}),e.jsxs(q,{children:[e.jsx(h,{value:"Nigeria",children:"Nigeria"}),e.jsx(h,{value:"Ghana",children:"Ghana"}),e.jsx(h,{value:"Kenya",children:"Kenya"}),e.jsx(h,{value:"South Africa",children:"South Africa"})]})]})]})})]})]})]}),p==="banking"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 p-4 mb-4",children:e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(V,{className:"h-5 w-5 text-yellow-400"})}),e.jsx("div",{className:"ml-3",children:e.jsx("p",{className:"text-sm text-yellow-700",children:"Your banking information is used for payouts. Please ensure all details are correct."})})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(l,{control:t.control,name:"bankName",render:({field:s})=>e.jsxs(n,{children:[e.jsx(o,{children:"Bank Name"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(Z,{className:"h-5 w-5 text-gray-400"})}),e.jsx(c,{children:e.jsx(i,{...s,className:"pl-10",placeholder:"Bank Name"})})]})]})}),e.jsx(l,{control:t.control,name:"accountName",render:({field:s})=>e.jsxs(n,{children:[e.jsx(o,{children:"Account Name"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(Q,{className:"h-5 w-5 text-gray-400"})}),e.jsx(c,{children:e.jsx(i,{...s,className:"pl-10",placeholder:"Account Holder Name"})})]})]})}),e.jsx(l,{control:t.control,name:"accountNumber",render:({field:s})=>e.jsxs(n,{children:[e.jsx(o,{children:"Account Number"}),e.jsx(c,{children:e.jsx(i,{...s,placeholder:"1234567890"})})]})}),e.jsx(l,{control:t.control,name:"swiftCode",render:({field:s})=>e.jsxs(n,{children:[e.jsx(o,{children:"SWIFT/BIC Code"}),e.jsx(c,{children:e.jsx(i,{...s,placeholder:"ABCDEFGH"})})]})})]})]}),e.jsx("div",{className:"mt-6 flex justify-end",children:e.jsx(X,{type:"submit",disabled:I,className:"bg-orange-600 hover:bg-orange-700 disabled:opacity-50 disabled:cursor-not-allowed",children:I?e.jsxs(e.Fragment,{children:[e.jsx(ee,{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(te,{className:"-ml-1 mr-2 h-4 w-4"}),"Save Changes"]})})})]})})]})]})};export{ue as default};
