import{a0 as P,A as k,r as d,j as e,c as E,B as a,h as m,T,P as C,e as x}from"./index-CW7sJ-MG.js";import{B as p}from"./badge-D5WoGv9G.js";import{S as D}from"./square-pen-C0ENrl1l.js";const A=()=>{const{id:i}=P(),l=k(),[s,f]=d.useState(null),[j,h]=d.useState(!0),[u,g]=d.useState(null),[N,o]=d.useState(!1);d.useEffect(()=>{(async()=>{try{h(!0);const t=await fetch(`/api/route/product/${i}`);if(!t.ok)throw new Error(`HTTP error ${t.status}: ${t.statusText}`);const c=t.headers.get("content-type");if(!c||!c.includes("application/json"))throw new Error("Invalid response: Expected JSON, received HTML or other content");const n=await t.json();if(!n.success)throw new Error(n.message||"Failed to load product");f(n.product),g(null)}catch(t){console.error("Error fetching product:",t.message),g("Failed to load product. Please try again."),x.error("Failed to load product")}finally{h(!1)}})()},[i]);const v=()=>{l(`/outlet/product/${i}/edit`)},b=()=>{o(!0)},y=()=>{o(!1)},w=async()=>{try{const r=await fetch(`/api/route/products/${i}`,{method:"DELETE"});if(!r.ok)throw new Error(`HTTP error ${r.status}: ${r.statusText}`);const t=r.headers.get("content-type");if(!t||!t.includes("application/json"))throw new Error("Invalid response: Expected JSON, received HTML or other content");const c=await r.json();if(!c.success)throw new Error(c.message||"Failed to delete product");x.success("Product deleted successfully"),l("/outlet/products")}catch(r){console.error("Error deleting product:",r.message),x.error("Failed to delete product")}finally{o(!1)}};return j?e.jsx("div",{className:"flex justify-center items-center h-screen",children:e.jsx(E,{size:"lg"})}):u?e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsx("div",{className:"bg-red-50 border-l-4 border-red-400 p-4 mb-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-5 w-5 text-red-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),e.jsx("div",{className:"ml-3",children:e.jsx("p",{className:"text-sm text-red-700",children:u})})]})}),e.jsxs(a,{onClick:()=>l("/outlet/products"),className:"flex items-center text-gray-600 hover:text-gray-900",children:[e.jsx(m,{className:"h-4 w-4 mr-1"}),"Back to Products"]})]}):s?e.jsx("div",{className:"bg-gray-50 min-h-screen",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center mb-4 md:mb-0",children:[e.jsxs(a,{onClick:()=>l("/outlet/products"),variant:"ghost",className:"mr-4 text-gray-600 hover:text-gray-900",children:[e.jsx(m,{className:"h-5 w-5 mr-1"}),"Back"]}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Product Details"})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs(a,{onClick:v,className:"bg-amber-500 hover:bg-amber-600 text-white",children:[e.jsx(D,{className:"h-4 w-4 mr-2"}),"Edit Product"]}),e.jsxs(a,{onClick:b,variant:"outline",className:"border-red-500 text-red-500 hover:bg-red-50",children:[e.jsx(T,{className:"h-4 w-4 mr-2"}),"Delete"]})]})]}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden mb-8",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 p-6",children:[e.jsx("div",{className:"md:col-span-1",children:e.jsx("div",{className:"aspect-square rounded-lg overflow-hidden bg-gray-100 flex items-center justify-center",children:s.productImage?e.jsx("img",{src:s.productImage,alt:s.productName,className:"w-full h-full object-cover",onError:()=>console.error("Failed to load image:",s.productImage)}):e.jsx(C,{className:"h-24 w-24 text-gray-400"})})}),e.jsxs("div",{className:"md:col-span-2 flex flex-col",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-start md:justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:s.productName}),e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx(p,{className:"bg-blue-100 text-blue-800 hover:bg-blue-100 mr-2",children:s.category}),e.jsxs("span",{className:"text-sm text-gray-500",children:["ID: ",s.productId||s._id]})]})]}),e.jsxs("div",{className:"mt-2 md:mt-0 text-right",children:[e.jsxs("div",{className:"text-2xl font-bold text-gray-900",children:["₦",s.productPrice.toFixed(2)]}),s.discountPrice&&e.jsxs("div",{className:"text-sm text-gray-500 line-through",children:["₦",s.discountPrice.toFixed(2)]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Description"}),e.jsx("p",{className:"text-gray-700",children:s.description||"No description available."})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Stock Information"}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm text-gray-500",children:"Available Stock:"}),e.jsxs("span",{className:`font-medium ${s.numberOfProductsAvailable>0?"text-green-600":"text-red-600"}`,children:[s.numberOfProductsAvailable," units"]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-500",children:"Status:"}),e.jsx(p,{className:s.numberOfProductsAvailable>0?"bg-green-100 text-green-800":"bg-red-100 text-red-800",children:s.numberOfProductsAvailable>0?"In Stock":"Out of Stock"})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Product Details"}),e.jsx("div",{className:"bg-gray-50 p-4 rounded-lg",children:s.specifications&&Array.isArray(s.specifications)&&s.specifications.length>0?e.jsx("dl",{className:"divide-y divide-gray-200",children:s.specifications.map((r,t)=>e.jsxs("div",{className:"flex justify-between py-2",children:[e.jsx("dt",{className:"text-sm text-gray-500",children:r.key}),e.jsx("dd",{className:"text-sm font-medium text-gray-900",children:r.value})]},t))}):e.jsx("p",{className:"text-sm text-gray-500",children:"No specifications available."})})]})]})]})]})}),N&&e.jsx("div",{className:"fixed inset-0 bg-black/80 bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Confirm Delete"}),e.jsxs("p",{className:"text-sm text-gray-500 mb-6",children:["Are you sure you want to delete ",e.jsx("span",{className:"font-medium",children:s.productName}),"? This action cannot be undone."]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx(a,{onClick:y,variant:"outline",className:"border-gray-300 text-gray-700",children:"Cancel"}),e.jsx(a,{onClick:w,className:"bg-red-600 hover:bg-red-700 text-white",children:"Delete"})]})]})})]})}):e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 p-4 mb-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-5 w-5 text-yellow-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:e.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),e.jsx("div",{className:"ml-3",children:e.jsx("p",{className:"text-sm text-yellow-700",children:"Product not found"})})]})}),e.jsxs(a,{onClick:()=>l("/outlet/products"),className:"flex items-center text-gray-600 hover:text-gray-900",children:[e.jsx(m,{className:"h-4 w-4 mr-1"}),"Back to Products"]})]})};export{A as default};
