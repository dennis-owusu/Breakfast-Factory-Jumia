import{a as h,r,j as e,c as y,f,d as g,e as j}from"./index-CW7sJ-MG.js";import{B as w}from"./badge-D5WoGv9G.js";const k=()=>{const{currentUser:s}=h(t=>t.user),[p,o]=r.useState([]),[x,d]=r.useState(!0),[l,n]=r.useState(null);return r.useEffect(()=>{s&&(async()=>{try{d(!0),n(null);const a={"Content-Type":"application/json",Authorization:`Bearer ${s.token}`},m=(s==null?void 0:s.usersRole)==="outlet"?s._id:null,c=await fetch("/api/route/payments",{headers:a});if(!c.ok){const u=await c.json();throw new Error(u.message||"Failed to fetch transactions")}const i=await c.json();i&&i.payments?o(i.payments):(o([]),n("No transaction data available"))}catch(a){console.error("Transaction fetch error:",a),n(a.message||"Failed to load transactions"),j.error(a.message||"Failed to load transactions")}finally{d(!1)}})()},[s]),x?e.jsx(y,{}):l?e.jsx("div",{className:"text-red-500 text-center py-8",children:l}):e.jsxs("div",{className:"bg-gray-50 min-h-screen p-6",children:[e.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Transactions"}),e.jsx("div",{className:"bg-white rounded-lg shadow overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Reference"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Method"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:p.map(t=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:f(t.createdAt)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:t.referenceId}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:[g(t.amount)," ",t.currency]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:t.paymentMethod}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx(w,{variant:t.status==="paid"||t.status==="successful"?"success":"destructive",children:t.status==="paid"?"Success":t.status})})]},t._id))})]})})]})};export{k as default};
