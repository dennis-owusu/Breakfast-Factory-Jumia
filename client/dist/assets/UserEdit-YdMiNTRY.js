import{a0 as y,A as v,r as l,j as e,c as w,e as c}from"./index-CW7sJ-MG.js";const S=()=>{const{id:i}=y(),d=v(),[N,f]=l.useState(null),[x,b]=l.useState(!0),[u,m]=l.useState(!1),[s,h]=l.useState({name:"",email:"",phoneNumber:"",usersRole:"",status:""});l.useEffect(()=>{(async()=>{try{const a=localStorage.getItem("token"),n=await fetch(`/api/auth/get-all-users?id=${i}`,{headers:{Authorization:`Bearer ${a}`}});if(!n.ok)throw new Error("Failed to fetch user");const t=(await n.json()).allUsers.find(j=>j._id===i);if(!t)throw new Error("User not found");f(t),h({name:t.name||"",email:t.email||"",phoneNumber:t.phoneNumber||"",usersRole:t.usersRole||"user",status:t.status||"active"})}catch(a){c.error(a.message)}finally{b(!1)}})()},[i]);const r=o=>{h({...s,[o.target.name]:o.target.value})},p=async o=>{o.preventDefault(),m(!0);try{const a=localStorage.getItem("token"),n=await fetch(`/api/auth/user/update/${i}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`},body:JSON.stringify(s)});if(!n.ok){const g=await n.json();throw new Error(g.message||"Failed to update user")}c.success("User updated successfully"),d("/admin/users")}catch(a){c.error(a.message)}finally{m(!1)}};return x?e.jsx("div",{className:"flex justify-center items-center min-h-screen",children:e.jsx(w,{size:"lg"})}):e.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[e.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Edit User"}),e.jsxs("form",{onSubmit:p,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Name"}),e.jsx("input",{type:"text",name:"name",value:s.name,onChange:r,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-orange-500 focus:ring-orange-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Email"}),e.jsx("input",{type:"email",name:"email",value:s.email,onChange:r,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-orange-500 focus:ring-orange-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Phone Number"}),e.jsx("input",{type:"tel",name:"phoneNumber",value:s.phoneNumber,onChange:r,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-orange-500 focus:ring-orange-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Role"}),e.jsxs("select",{name:"usersRole",value:s.usersRole,onChange:r,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-orange-500 focus:ring-orange-500",children:[e.jsx("option",{value:"user",children:"Customer"}),e.jsx("option",{value:"outlet",children:"Outlet Owner"}),e.jsx("option",{value:"admin",children:"Admin"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Status"}),e.jsxs("select",{name:"status",value:s.status,onChange:r,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-orange-500 focus:ring-orange-500",children:[e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{type:"button",onClick:()=>d("/admin/users"),className:"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-orange-500",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:u,className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-orange-600 hover:bg-orange-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-orange-500 disabled:opacity-50",children:u?"Saving...":"Save Changes"})]})]})]})})};export{S as default};
