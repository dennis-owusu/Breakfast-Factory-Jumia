import{j as e,$ as c,a as E,r as l,L as T,B as o,n as _,I as $,g as F,p as D,q as I,s as R,t as q,v as A,T as z,h as H,C as M,e as g}from"./index-CW7sJ-MG.js";import{S as V}from"./square-pen-C0ENrl1l.js";function Z({className:s,...t}){return e.jsx("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:e.jsx("table",{"data-slot":"table",className:c("w-full caption-bottom text-sm",s),...t})})}function O({className:s,...t}){return e.jsx("thead",{"data-slot":"table-header",className:c("[&_tr]:border-b",s),...t})}function Y({className:s,...t}){return e.jsx("tbody",{"data-slot":"table-body",className:c("[&_tr:last-child]:border-0",s),...t})}function u({className:s,...t}){return e.jsx("tr",{"data-slot":"table-row",className:c("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",s),...t})}function h({className:s,...t}){return e.jsx("th",{"data-slot":"table-head",className:c("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",s),...t})}function d({className:s,...t}){return e.jsx("td",{"data-slot":"table-cell",className:c("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",s),...t})}const K=()=>{const{currentUser:s}=E(a=>a.user),[t,j]=l.useState([]),[p,f]=l.useState(""),[m,N]=l.useState("name-asc"),[n,b]=l.useState(1),x=10,[L,y]=l.useState(!1),[C,w]=l.useState("");l.useEffect(()=>{s&&(async()=>{y(!0);try{const i=await(await fetch("/api/route/allcategories",{headers:{Authorization:`Bearer ${s==null?void 0:s.token}`}})).json();i?j(i.allCategory||[]):w(i.message)}catch{w("Failed to load categories")}y(!1)})()},[s]);const P=async a=>{try{const r=await fetch(`/api/route/category/delete/${a}`,{method:"DELETE",headers:{Authorization:`Bearer ${s==null?void 0:s.token}`}}),i=await r.json();r.ok?(j(t.filter(B=>B._id!==a)),g.success("Category deleted")):g.error(i.message)}catch{g.error("Failed to delete category")}},v=t.filter(a=>a.categoryName.toLowerCase().includes(p.toLowerCase())).sort((a,r)=>m==="name-asc"?a.categoryName.localeCompare(r.categoryName):m==="name-desc"?r.categoryName.localeCompare(a.categoryName):0),S=Math.ceil(v.length/x),k=v.slice((n-1)*x,n*x);return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Manage Categories"}),e.jsx(T,{to:"/outlet/categories/new",children:e.jsxs(o,{className:"bg-orange-500 text-white",children:[e.jsx(_,{className:"mr-2 h-4 w-4"})," Add Category"]})})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm mb-6 grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx($,{placeholder:"Search categories",value:p,onChange:a=>f(a.target.value),className:"pl-10"}),e.jsx(F,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"})]}),e.jsxs(D,{value:m,onValueChange:N,children:[e.jsx(I,{children:e.jsx(R,{placeholder:"Sort by"})}),e.jsxs(q,{children:[e.jsx(A,{value:"name-asc",children:"Name: A-Z"}),e.jsx(A,{value:"name-desc",children:"Name: Z-A"})]})]}),e.jsx(o,{onClick:()=>{f(""),N("name-asc")},variant:"outline",children:"Clear Filters"})]}),C&&e.jsx("p",{className:"text-red-500 mb-4",children:C}),L?e.jsx("p",{children:"Loading..."}):e.jsxs(Z,{children:[e.jsx(O,{children:e.jsxs(u,{className:"bg-gray-50 text-left text-sm font-medium text-gray-600 uppercase",children:[e.jsx(h,{className:"p-3",children:"Name"}),e.jsx(h,{className:"p-3",children:"Description"}),e.jsx(h,{className:"p-3",children:"Featured"}),e.jsx(h,{className:"p-3 text-right",children:"Actions"})]})}),e.jsx(Y,{children:k.length>0?k.map(a=>e.jsxs(u,{className:"border-t hover:bg-gray-50",children:[e.jsx(d,{className:"p-3",children:a.categoryName}),e.jsx(d,{className:"p-3",children:a.description||"N/A"}),e.jsx(d,{className:"p-3",children:a.featured?"Yes":"No"}),e.jsxs(d,{className:"p-3 text-right",children:[e.jsx(T,{to:`/outlet/category-form/${a._id}`,children:e.jsx(o,{variant:"ghost",children:e.jsx(V,{className:"h-4 w-4"})})}),e.jsx(o,{variant:"ghost",onClick:()=>P(a._id),children:e.jsx(z,{className:"h-4 w-4"})})]})]},a._id)):e.jsx(u,{children:e.jsx(d,{colSpan:4,className:"text-center",children:"No categories found"})})})]}),e.jsxs("div",{className:"flex justify-between mt-4",children:[e.jsx(o,{disabled:n===1,onClick:()=>b(a=>a-1),children:e.jsx(H,{className:"h-4 w-4"})}),e.jsxs("span",{children:["Page ",n," of ",S]}),e.jsx(o,{disabled:n>=S,onClick:()=>b(a=>a+1),children:e.jsx(M,{className:"h-4 w-4"})})]})]})};export{K as default};
